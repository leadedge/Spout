<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>1) New-in-2.007.txt</title><link rel="stylesheet" type="text/css" href="../../styles/main.css" /><script type="text/javascript" src="../../styles/main.js"></script><script type="text/javascript">NDLoader.LoadJS("Content", "../../styles/");</script></head>

<!-- Generated by Natural Docs, version 2.1 -->

<!-- saved from url=(0016)http://localhost -->

<body onload="NDLoader.OnLoad('Content');" class="NDPage NDContentPage">

<a name="New_in_2.007"></a><a name="Topic18"></a><div class="CTopic TSection LTextFile first">
 <div class="CTitle">New in 2.007</div>
 <div class="CBody"><p>What's new in Spout 2.007</p></div>
</div>

<a name="Introduction"></a><a name="Topic19"></a><div class="CTopic TGroup LTextFile">
 <div class="CTitle">Introduction</div>
 <div class="CBody"><p>2.007 revisions are aimed at making the sending and receiving functions easier to use, particularly for the receiver.</p><p>Sending functions manage sender creation and update. Receiving functions manage sender connection and size change.</p><p>All 2.006 functions remain available, including those for sender names, graphics adapter and sharing mode.</p><p>The new functions described following are are additional. This allows existing 2.006 projects to be upgraded by simply changing source files or building with a new dll.</p></div>
</div>

<a name="Changes_for_2.007"></a><a name="Topic20"></a><div class="CTopic TGroup LTextFile">
 <div class="CTitle">Changes for 2.007</div>
 <div class="CBody"><p>Compatibility for OpenGL texture sharing using NVIDIA GL/DX interop extensions, is always tested when a sender or receiver is first initialized.</p><p>Where hardware is not texture share compatible, sending and receiving functions switch to backup methods with system memory for sharing textures instead of GPU methods.</p><p><b>CPU mode backup</b></p><p>CPU mode using DirectX textures (introduced in 2.006 ), is used as a backup. Performance has been improved by using multiple DirectX 11 staging textures as well as multiple OpenGL pixel buffers.</p><p>The advantage of CPU mode is that an application using graphics that is incompatible with texture sharing can still communicate with another on the same machine using compatible graphics hardware. This situation can occur with dual graphics laptop systems (NVIDIA “Optimus” or AMD “Dynamic Switchable Graphics”).</p><p><b>Auto mode switching</b></p><p>The switch from GPU to CPU methods is automatic, but there could be situations where an unforeseen slowdown may be undesirable and it would be preferable for sharing to fail so that grpahics compatibility is clear.</p><p>This can be controlled by the user with “SpoutSettings” by selecting “Auto” OFF. The setting then applies globally for 2.007 applications.</p><p><b>Memoryshare removed</b></p><p>Memoryshare mode using shared memory directly has been removed and, although new senders cannot initiate this mode, existing 2.006 Memoryshare senders will still communicate with 2.007 receivers.</p><p><b>New class files</b></p><p>spoutGL replaces spoutGLDXinterop and is now a base class to SpoutSDK. SpoutSender and SpoutReceiver remain as convenience wrappers to isolate sender and receiver functions.</p><p><b>Legacy OpenGL</b></p><p>Functions with legacy OpenGL code can be disabled so that the SDK is compliant with more recent versions of OpenGL by removing a define in “SpoutCommon.h”.</p><pre>#define legacyOpenGL</pre><p>The following functions are then disabled :</p><pre>DrawSharedTexture<br />DrawToSharedTexture</pre><p><b>std namespace removed</b></p><pre><span class="SHKeyword">using namespace</span> std;</pre><p>Programmers have the option for including this or not. If you receive warnings about missing std functions with existing projects, you will need to include this statement in your header files or use the &quot;std::&quot; prefix for those functions.</p><p><b>Changed functions</b></p><pre><span class="SHKeyword">bool</span> GetSenderName(<span class="SHKeyword">int</span> index, <span class="SHKeyword">char</span>* Sendername, <span class="SHKeyword">int</span> MaxSize = <span class="SHNumber">256</span>);</pre><p>Changed to :</p><pre><span class="SHKeyword">bool</span> GetSender(<span class="SHKeyword">int</span> index, <span class="SHKeyword">char</span>* Sendername, <span class="SHKeyword">int</span> MaxSize = <span class="SHNumber">256</span>);</pre><p>GetSenderName now returns the connected sender name.</p><pre><span class="SHKeyword">const char</span> * GetSenderName();</pre><p>The GetImageSize function has been removed.</p></div>
</div>

<a name="Spout_Utilities"></a><a name="Topic21"></a><div class="CTopic TGroup LTextFile">
 <div class="CTitle">Spout Utilities</div>
 <div class="CBody"><p>“SpoutUtils” is a namespace containing utility functions that can be used throughout the SDK.</p><p>It contains the The logging and registry functions described below.</p></div>
</div>

<a name="Logging"></a><a name="Topic49"></a><div class="CTopic TGroup LTextFile">
 <div class="CTitle">Logging</div>
 <div class="CBody"><p>Logging is introduced throughout the SDK to provide advisory, warning and error notices.</p><p>Logs can be displayed in a console window or written to a file. The console window is useful during application development and logging to a file provides a means of tracing errors. You can also include your own logs.</p><p>Functions are based on Openframeworks logs and are used in a similar manner. Commented code examples are included in the Spout SDK openframeworks &quot;ofSpoutExample&quot; graphics sender application.</p><p>Often it is useful to open a console window during application development to output text messages. The console will only show what you print to it.</p><pre><span class="SHKeyword">void</span> OpenSpoutConsole();</pre><p>Close the console with an optional warning.</p><pre><span class="SHKeyword">void</span> CloseSpoutConsole(<span class="SHKeyword">bool</span> bWarning = <span class="SHKeyword">false</span>);</pre><p>Or you can enable console logging to see logs generated within the Spout SDK functions.</p><pre><span class="SHKeyword">void</span> EnableSpoutLog();</pre><p>Instead of a console, or additionally, you can specify output to a text file with the extension of your choice. The log file is re-created every time the application starts unless you specify to append to the existing one.</p><pre><span class="SHKeyword">void</span> EnableSpoutLog(<span class="SHKeyword">const</span> std::<span class="SHKeyword">string</span> filename, <span class="SHKeyword">bool</span> append = <span class="SHKeyword">false</span>);</pre><p>The file is saved in the %AppData% folder unless you specify a full path:</p><pre><span class="SHString">&quot;C:&gt;Users&gt;username&gt;AppData&gt;Roaming&gt;Spout&quot;</span></pre><p>After the application has run you can find and examine the log file. This folder can also be shown in Windows Explorer directly from the application.</p><pre><span class="SHKeyword">void</span> ShowSpoutLogs();</pre><p>Or the entire log can be returned as a string.</p><pre>std::<span class="SHKeyword">string</span> GetSpoutLog();</pre><p>You can set the level above which the logs are shown</p><pre>SPOUT_LOG_SILENT  - Disable all messages<br />SPOUT_LOG_VERBOSE - Show all messages<br />SPOUT_LOG_NOTICE  - Notices<br />SPOUT_LOG_WARNING - Warnings<br />SPOUT_LOG_ERROR   - Errors<br />SPOUT_LOG_FATAL   - Fatal errors</pre><p>For example, to show only warnings and errors :</p><pre>SetSpoutLogLevel(SPOUT_LOG_WARNING);</pre><p>or leave set to default Notice to see more information.</p><p>You can also create your own logs. For example :</p><pre>SpoutLog(<span class="SHString">&quot;SpoutLog test&quot;</span>);</pre><p>Or specify the logging level. For example :</p><pre>    SpoutLogNotice(<span class="SHString">&quot;Important notice&quot;</span>);<br />or :<br />    SpoutLogFatal(<span class="SHString">&quot;This should not happen&quot;</span>);<br />or :<br />    SetSpoutLogLevel(SPOUT_LOG_VERBOSE); // (default is SPOUT_LOG_NOTICE)<br />    SpoutLogVerbose(<span class="SHString">&quot;Message&quot;</span>);</pre><p>Logs can include strings, integers, float numbers etc. based on the &quot;printf&quot; notation. For example :</p><pre>SpoutLogNotice(<span class="SHString">&quot;myClass::myFunction - sender %s, %dx%d&quot;</span>, sendername, width, height);</pre><p>Finally you can disable logging at any time within your application.</p><pre>DisableSpoutLog();</pre></div>
</div>

<a name="SpoutMessageBox"></a><a name="Topic51"></a><div class="CTopic TGroup LTextFile">
 <div class="CTitle">SpoutMessageBox</div>
 <div class="CBody"><p>SputMessageBox can be used where a Windows MessageBox would interfere with the application GUI. SpoutMessageBox activates a</p><p>An executable dialog program is opened to avoid the problem. A timeout can also be specified so that the user does not need to dismiss the message.</p><p>Simple version :</p><pre><span class="SHKeyword">int</span> SpoutMessageBox(<span class="SHKeyword">const char</span> * message, DWORD dwMilliseconds = <span class="SHNumber">0</span>);</pre><p>Replace an existing MessageBox call :</p><pre><span class="SHKeyword">int</span> SpoutMessageBox(HWND hwnd, LPCSTR message, LPCSTR caption,<br />                 UINT uType, DWORD dwMilliseconds = <span class="SHNumber">0</span>);</pre><p>SpoutMessageBox uses &quot;SpoutPanel.exe&quot;, usually used to display a sender list, so Spoutsettings must have been run at least once. If not found, a standard, untimed, topmost messagebox is used.</p></div>
</div>

<a name="Registry_utilities"></a><a name="Topic53"></a><div class="CTopic TGroup LTextFile last">
 <div class="CTitle">Registry utilities</div>
 <div class="CBody"><p>Utility functions to read and write from the registry are now in the SpoutUtils namespace.</p><p>An &quot;HKEY&quot; argument has been added to make them more general purpose and order of arguments has been revised.</p><pre><span class="SHKeyword">bool</span> ReadDwordFromRegistry(HKEY hKey, <span class="SHKeyword">const char</span> *subkey,<br />        <span class="SHKeyword">const char</span> *valuename, DWORD *pValue);<br /><span class="SHKeyword">bool</span> WriteDwordToRegistry(HKEY hKey, <span class="SHKeyword">const char</span> *subkey,<br />        <span class="SHKeyword">const char</span> *valuename, DWORD dwValue);<br /><span class="SHKeyword">bool</span> ReadPathFromRegistry(HKEY hKey, <span class="SHKeyword">const char</span> *subkey,<br />        <span class="SHKeyword">const char</span> *valuename, <span class="SHKeyword">char</span> *filepath);<br /><span class="SHKeyword">bool</span> WritePathToRegistry(HKEY hKey, <span class="SHKeyword">const char</span> *subkey,<br />        <span class="SHKeyword">const char</span> *valuename, <span class="SHKeyword">const char</span> *filepath);<br /><span class="SHKeyword">bool</span> RemovePathFromRegistry(HKEY hKey, <span class="SHKeyword">const char</span> *subkey,<br />        <span class="SHKeyword">const char</span> *valuename);<br /><span class="SHKeyword">bool</span> RemoveSubKey(HKEY hKey, <span class="SHKeyword">const char</span> *subkey);<br /><span class="SHKeyword">bool</span> FindSubKey(HKEY hKey, <span class="SHKeyword">const char</span> *subkey);</pre></div>
</div>

</body></html>